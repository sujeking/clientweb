## IM 消息结构

```
消息头长度流的长度 + 消息头 + 消息体 = 整个消息的流
```

#### msgType

| 代码                                       | 说明                     | 实例                                 |
| ------------------------------------------ | ------------------------ | ------------------------------------ |
| -1                                         | 登录注册【连接成功上传】 | 长度{msgType:-1}                     |
| 0                                          | 结束本次咨询【连接不断】 | 长度{msgType:0}                      |
| **文本**                                   |                          |                                      |
| 11                                         | 普通消息                 | 长度{msgType:11}你好                 |
| **附件**                                   |                          |                                      |
| 21                                         | 图片                     | 长度{msgType:21,….}01010101010101    |
| 22                                         | 语音                     | 长度{msgType:22,...}0101010101010101 |
| ...                                        | ...                      | …                                    |
| **JSON**                                   |                          |                                      |
| 31                                         | 健康管理方案             | 长度{msgType:31,}json                |
| **最新数据【服务器主动发，客户端只接收】** |                          |                                      |
| 41                                         | 血压设备数据             | 长度{msgType:41,}json                |
| 42                                         | 血糖设备数据【暂不考虑】 | 长度{msgType:42,}json                |
| 43                                         | app内消息提醒            | 长度{msgType:43,}                    |

- ###  登陆

  ```
  32{"msgType":"-1","sender":"001"}
  ```

- ### 推出【离线】

  ```
  31{"msgType":"0","sender":"001"}
  ```

- ### 发送文本

  ```
  49{"msgType":"11","bodyLength":"88","sender":"001","receiver":"002"}hello 002
  ```

- ### 发送附件

  ```
  49{"msgType":"21","bodyLength":"88","sender":"001","receiver":"002"}01010101010101010
  ```

- ### 发送健康管理方案

  ```
  49{"msgType":"31","bodyLength":"88","sender":"001","receiver":"002"}{"CJKFABT":"这是新增测试的标题1(修改后)","CYSMC":"赵子龙","CJHJJ":"这是新增测试的简介1(修改后)","DCREATTIME":"2018-04-10 10:00:01"}
  ```

  ​

- ### 接收血压测量数据

  ```
  49{"msgType":"41","receiver":"002"}{
        'CSZY': "1",  //舒张血压
        'CHZBM': "hz0001",  //患者编码
        'ILRLX': 2,    //数据类型 1、手动录入 2、自动获取
        'DTJSJ': "2017-12-21 10:30:54",   //添加时间
        'CXL': "1",         //心率值
        'ICLZT': 1,        //测量状态  1、正常   2、偏高   3、偏低
        'CSSY': "1",       //收缩血压
        'DCLSJ': "2017-12-21 10:30:52",    //测量时间
        'CBM': "3"          //测量记录编码
    }
  ```

- ### 接收血糖测量数据

  ```
  49{"msgType":"42","bodyLength":"88","receiver":"002"}{"CJKFABT":"这是新增测试的标题1(修改后)","CYSMC":"赵子龙","CJHJJ":"这是新增测试的简介1(修改后)","DCREATTIME":"2018-04-10 10:00:01"}
  ```

- ### 接收消息提醒

  ```
  49{"msgType":"43","bodyLength":"88","receiver":"002"}
  ```

  ​
