## IM 消息结构

```
消息头长度流的长度 + 消息头 + 消息体 = 整个消息的流
```

#### msgType

| 代码     | 说明                     | 实例                                 |
| -------- | ------------------------ | ------------------------------------ |
| -1       | 登录注册【连接成功上传】 | 长度{msgType:-1}                     |
| 0        | 结束本次咨询【连接不断】 | 长度{msgType:0}                      |
| **文本** |                          |                                      |
| 11       | 普通消息                 | 长度{msgType:11}你好                 |
| **附件** |                          |                                      |
| 21       | 图片                     | 长度{msgType:21,….}01010101010101    |
| 22       | 语音                     | 长度{msgType:22,...}0101010101010101 |
| ...      | ...                      | …                                    |
| **URL**  |                          |                                      |
| 31       | 健康管理方案             | 长度{msgType:31,}json                |

- ###  登陆

  ```
  32{"msgType":"-1","sender":"001"}
  ```

- ### 推出【离线】

  ```
  31{"msgType":"0","sender":"001"}
  ```

- ### 发送文本

  ```
  49{"msgType":"11","sender":"001","receiver":"002"}hello 002
  ```

- ### 发送附件

  ```
  49{"msgType":"21","sender":"001","receiver":"002"}01010101010101010
  ```

- ### 发送健康管理方案

  ```
  49{"msgType":"31","sender":"001","receiver":"002"}{"CJKFABT":"这是新增测试的标题1(修改后)","CYSMC":"赵子龙","CJHJJ":"这是新增测试的简介1(修改后)","DCREATTIME":"2018-04-10 10:00:01"}
  ```

  ​
